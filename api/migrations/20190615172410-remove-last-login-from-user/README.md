# Migration `20190615172410-remove-last-login-from-user`

This migration has been generated by Peter Pistorius at 6/15/2019, 5:24:10 PM.
You can check out the [state of the datamodel](./datamodel.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "dev"."new_User" ("id" INTEGER DEFAULT 0 NOT NULL, "username" TEXT DEFAULT '' NOT NULL, "name" TEXT, "isActive" BOOLEAN DEFAULT true NOT NULL, PRIMARY KEY ("id"));

INSERT INTO "new_User" ("id","username","name","isActive") SELECT "id","username","name","isActive" from "User"

DROP TABLE "dev"."User";

ALTER TABLE "dev"."new_User" RENAME TO "User";

PRAGMA "dev".foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git datamodel.mdl datamodel.mdl
migration 20190615163204-add-document-and-comment..20190615172410-remove-last-login-from-user
--- datamodel.dml
+++ datamodel.dml
@@ -4,18 +4,17 @@
   default  = true
 }
 generator photon {
-  provider = "photogen"
+  provider = "javascript"
   output   = "./generated/photon"
 }
 model User {
   id        Int       @id
   username  String    @unique
   name      String?
   isActive  Boolean   @default(true)
-  lastLogin DateTime
 }
 model Document {
   id        Int       @id
```

## Photon Usage

You can use a specific Photon built for this migration (20190615172410-remove-last-login-from-user)
in your `before` or `after` migration script like this:

```ts
import Photon from '@generated/photon/20190615172410-remove-last-login-from-user'

const photon = new Photon()

async function main() {
  const result = await photon.users()
  console.dir(result, { depth: null })
}

main()

```
